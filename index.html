<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>CPM calculator</title>

<style>
body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: sans-serif;
    text-align: center;

    touch-action: manipulation;
    user-select: none;
}

#totalClicks {
    font-size: 20px;
    margin-bottom: 10px;
    color: blue;
}

#message {
    font-size: 24px;
    color: red;
    cursor: pointer;
}
</style>
</head>

<body>

<!-- Sumaryczna liczba kliknięć -->
<div id="totalClicks">Total clicks: 0</div>

<!-- Główna wiadomość -->
<div id="message">Press SPACE or tap anywhere as fast as possible</div>

<script>
// --- inicjalizacja zmiennych ---
let clicks = parseInt(localStorage.getItem('totalClicks')) || 0;
let required = 100;
let seconds = 0;
const timeLimit = 60;

let started = false;
let timerFinished = false;

const message = document.getElementById('message');
const totalClicks = document.getElementById('totalClicks');

// aktualizacja widoku przy starcie
totalClicks.textContent = `Total clicks: ${clicks}`;

// --- cheat key ---
document.addEventListener('keydown', (e) => {
    if (!started && e.key.toLowerCase() === 'f') {
        required = 10000000;
    }
});

// --- timer ---
const timer = setInterval(() => {
    if (!started) return;

    seconds++;

    if (seconds >= timeLimit) {
        seconds = timeLimit;
        clearInterval(timer);
        timerFinished = true;
        message.textContent = `Time's up! CPM: ${clicks}`;
        return;
    }

    message.textContent =
        `Clicks: ${clicks}, Time: ${seconds} / ${timeLimit}s`;
}, 1000);

// --- funkcja kliknięcia / spacji ---
function clickEvent() {
    if (timerFinished) return;

    started = true;
    clicks++;

    // aktualizacja sumarycznej liczby kliknięć
    totalClicks.textContent = `Total clicks: ${clicks}`;

    // zapis w localStorage
    localStorage.setItem('totalClicks', clicks);

    if (clicks >= required) {
        window.open('https://ptoszek.pl', '_blank');
    } else {
        message.textContent =
            `Clicks: ${clicks}, Time: ${seconds} / ${timeLimit}s`;
    }
}

// --- obsługa klawiatury ---
document.addEventListener('keydown', (e) => {
    if (
        e.code === 'Space' ||
        e.key === ' ' ||
        e.key.toLowerCase() === 'x'
    ) {
        clickEvent();
    }
});

// --- kliknięcie / dotknięcie w dowolnym miejscu ---
document.addEventListener('pointerdown', clickEvent);

// --- blokada double-tap zoom na telefonie ---
let lastTouch = 0;
document.addEventListener('touchend', (e) => {
    const now = Date.now();
    if (now - lastTouch <= 300) {
        e.preventDefault();
    }
    lastTouch = now;
}, { passive: false });

</script>

<script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>

</body>
</html>
