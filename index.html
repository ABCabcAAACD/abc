<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Gra z licznikiem odwiedzin</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: sans-serif;
    text-align: center;
  }
  #napis {
    font-size: 24px;
    color: red;
    user-select: none; 
    cursor: pointer;
  }
  #licznik {
    font-size: 20px;
    color: blue;
    margin-top: 20px;
  }
</style>
</head>
<body>

<div id="napis">Naciskaj SPACJE lub dotknij ekran jak najszybciej</div>
<div id="licznik">Ładowanie liczby odwiedzin...</div>

<script>
let klik = 0;             
let wymagane = 310;      
let sekundy = 0;          
const limitCzasu = 60;   

const napis = document.getElementById('napis');
const licznik = document.getElementById('licznik');
let timerZakonczony = false;
let rozpoczęto = false;

// --- Kod "F" do zmiany wymaganej liczby kliknięć ---
document.addEventListener('keydown', function(event) {
    if(!rozpoczęto && event.key.toLowerCase() === 'f') {
        wymagane = 10000000;
    }
});

// --- Timer ---
const timer = setInterval(() => {
    if(!rozpoczęto) return; 
    sekundy++;
    if(sekundy >= limitCzasu) {
        sekundy = limitCzasu;
        clearInterval(timer);
        timerZakonczony = true;
        const cpm = klik; 
        napis.textContent = `Czas minął! CPM: ${cpm}`;
        return;
    }
    if(!timerZakonczony) {
        napis.textContent = `Kliknięcia: ${klik}, Czas: ${sekundy} / ${limitCzasu}s`;
    }
}, 1000);

// --- Funkcja obsługująca kliknięcia / spację ---
function klikEvent() {
    if(timerZakonczony) return;
    rozpoczęto = true;
    klik++;
    if(klik < wymagane) {
        napis.textContent = `Kliknięcia: ${klik}, Czas: ${sekundy} / ${limitCzasu}s`;
    } else {
        window.open('https://ptoszek.pl', '_blank');
    }
}

// --- Obsługa spacji (komputer / PS) ---
document.addEventListener('keydown', function(event) {
    if(event.code === 'Space' || event.key === ' ' || event.key === 'Spacebar' || event.key === 'x' || event.key === 'X') {
        klikEvent();
    }
});

// --- Obsługa kliknięcia / dotyku (telefon) ---
napis.addEventListener('click', klikEvent);
napis.addEventListener('touchend', klikEvent);

// --- LICZNIK ODWIEDZIN ---
// Używamy countapi.xyz
const namespace = 'abc';   // dowolna unikalna nazwa Twojej strony
const key = 'wejscia';     // klucz licznika

async function aktualizujLicznik() {
    try {
        const res = await fetch(`https://api.countapi.xyz/hit/${namespace}/${key}`);
        const data = await res.json();
        licznik.textContent = `Odwiedzono stronę ${data.value} razy`;
    } catch (e) {
        licznik.textContent = `Nie udało się załadować licznika`;
        console.error(e);
    }
}

// Wywołanie przy starcie
aktualizujLicznik();

</script>

</body>
</html>
