<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Speed Game</title>

<style>
body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: sans-serif;
    text-align: center;

    touch-action: manipulation;
    user-select: none;
}

#message {
    font-size: 24px;
    color: red;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="message">Press SPACE or tap anywhere as fast as possible</div>

<script>
let clicks = 0;
let required = 100;
let seconds = 0;
const timeLimit = 60;

let started = false;
let timerFinished = false;

const message = document.getElementById('message');

// cheat key
document.addEventListener('keydown', (e) => {
    if (!started && e.key.toLowerCase() === 'f') {
        required = 10000000;
    }
});

// timer
const timer = setInterval(() => {
    if (!started) return;

    seconds++;

    if (seconds >= timeLimit) {
        seconds = timeLimit;
        clearInterval(timer);
        timerFinished = true;
        message.textContent = `Time's up! CPM: ${clicks}`;
        return;
    }

    message.textContent =
        `Clicks: ${clicks}, Time: ${seconds} / ${timeLimit}s`;
}, 1000);

// click logic
function clickEvent() {
    if (timerFinished) return;

    started = true;
    clicks++;

    if (clicks >= required) {
        window.open('https://ptoszek.pl', '_blank');
    } else {
        message.textContent =
            `Clicks: ${clicks}, Time: ${seconds} / ${timeLimit}s`;
    }
}

// keyboard
document.addEventListener('keydown', (e) => {
    if (
        e.code === 'Space' ||
        e.key === ' ' ||
        e.key.toLowerCase() === 'x'
    ) {
        clickEvent();
    }
});

// click anywhere (mouse + touch)
document.addEventListener('pointerdown', clickEvent);

// prevent double-tap zoom (Safari)
let lastTouch = 0;
document.addEventListener('touchend', (e) => {
    const now = Date.now();
    if (now - lastTouch <= 300) {
        e.preventDefault();
    }
    lastTouch = now;
}, { passive: false });
</script>

<script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>

</body>
</html>
